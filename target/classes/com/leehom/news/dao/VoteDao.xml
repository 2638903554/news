<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.leehom.news.dao.VoteDao">

    <insert id="insert" useGeneratedKeys="true" keyProperty="voteId">
        insert into vote(
             vote_name, vote_address, vote_age,
             vote_job, vote_remark,
             <if test="voteNumber != null and voteNumber != ''">
                 vote_number
             </if> )
        values (
            #{voteName},#{voteAddress},#{voteAge},
            #{voteJob},#{voteRemark},
            <if test="voteNumber != null and voteNumber !=''">
                #{voteNumber}
            </if>)
    </insert>


    <select id="selectByIdOrName" resultType="Vote">
        select vote_id,
               vote_name,
               vote_age,
               vote_address,
               vote_job,
               vote_remark
        from vote
        where 1 = 1
        <choose>
            <when test="voteId != null">
                and vote_id = #{voteId}
            </when>
            <when test="voteName != null and voteName !=''">
                and vote_name = #{voteName}
            </when>
            <otherwise>
                and 1 = 2
            </otherwise>
        </choose>
    </select>


    <select id="selectByVote" resultType="Vote">
        select vote_id,vote_name,
               vote_job,vote_number,
               vote_address,vote_remark,
               vote_age
        from vote
        <where>
            <if test="voteId != null and voteId !=''">
                and vote_id like concat('%',#{voteId},'%')
            </if>
            <if test="voteName != null and voteName !=''">
                and vote_name = #{voteName}
            </if>
        </where>
    </select>

</mapper>