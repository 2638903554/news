<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.leehom.news.dao.NewsDao">

    <select id="selectByNewsId" resultType="News">
        select * from news where news_id = #{newsId}
    </select>

    <select id="selectAllByNewsId" resultType="com.leehom.news.dto.NewsDto">
        select
            n.news_id ,
            n.news_title ,
            d.detail_name,
            n.create_time
        from
            news n
            inner join detail d on n.detail_id = d.detail_id
        WHERE n.news_id = #{newsId}
    </select>

    <select id="selectAll" resultType="com.leehom.news.dto.NewsDto">
        select
            n.news_id ,
            n.news_title ,
            d.detail_name,
            n.create_time
        from
            news n
        inner join detail d on n.detail_id = d.detail_id
    </select>

    <select id="selectNewsByTypeIdAndKeyWord" resultType="com.leehom.news.dto.NewsDto">
        select
            n.news_id,
            n.news_title,
            d.detail_name,
            n.create_time
        FROM type t
        INNER JOIN detail d on d.type_id = t.type_id
        INNER JOIN news n on n.detail_id = d.detail_id
        WHERE
            n.news_title LIKE concat('%',#{newsTitle},'%')
        and
          t.type_id = #{typeId}

    </select>


    <select id="selectThreeNewsByTypeId" resultType="com.leehom.news.dto.NewsDto">
        select
            n.news_id,
            n.news_title,
            d.detail_name,
            n.create_time
        FROM type t
            INNER JOIN detail d on d.type_id = t.type_id
            INNER JOIN news n on n.detail_id = d.detail_id
        WHERE
            t.type_id = #{typeId}
        LIMIT 0,3
    </select>

    <select id="selectNewsByTypeId" resultType="com.leehom.news.dto.NewsDto">
        select
        n.news_id,
        n.news_title,
        d.detail_name,
        n.create_time
        FROM type t
        INNER JOIN detail d on d.type_id = t.type_id
        INNER JOIN news n on n.detail_id = d.detail_id
        WHERE
        t.type_id = #{typeId}
    </select>
</mapper>