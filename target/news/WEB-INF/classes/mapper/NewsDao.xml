<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.leehom.news.dao.NewsDao">

    <select id="selectByNewsId" resultType="News">
        select * from news where news_id = #{newsId}
    </select>

    <select id="selectAllByNewsId" resultType="com.leehom.news.dto.NewsDto">
        select
            n.news_id ,
            n.news_title ,
            s.subnav_name,
            n.create_time
        from
            news n
            inner join subnav s on n.subnav_id = s.subnav_name
        WHERE n.news_id = #{newsId}
    </select>

    <select id="selectAll" resultType="com.leehom.news.dto.NewsDto">
        select
            n.news_id ,
            n.news_title ,
            s.subnav_name,
            n.create_time
        from
            news n
        inner join subnav s on n.subnav_id = s.subnav_id
    </select>

    <select id="selectNewsByTypeIdAndKeyWord" resultType="com.leehom.news.dto.NewsDto">
        select
            n.news_id,
            n.news_title,
            s.subnav_name,
            n.create_time
        FROM nav nv
        INNER JOIN subnav s on s.nav_id = nv.nav_id
        INNER JOIN news n on n.subnav_id = s.subnav_id
        WHERE
            n.news_title LIKE concat('%',#{newsTitle},'%')
        and
          nv.nav_id = #{typeId}

    </select>


    <select id="selectThreeNewsByTypeId" resultType="com.leehom.news.dto.NewsDto">
        select
            ns.news_id,
            ns.news_title,
            s.subnav_name,
            ns.create_time
        FROM nav nv
            INNER JOIN subnav s on s.nav_id = nv.nav_id
            INNER JOIN news ns on ns.subnav_id = s.subnav_id
        WHERE
            nv.nav_id = #{typeId}
        LIMIT 0,3
    </select>

    <select id="selectNewsByTypeId" resultType="com.leehom.news.dto.NewsDto">
        select
        ns.news_id,
        ns.news_title,
        s.subnav_name,
        ns.create_time
        FROM nav nv
        INNER JOIN subnav s on s.nav_id = nv.nav_id
        INNER JOIN news ns on ns.subnav_id = s.subnav_id
        WHERE
        nv.nav_id = #{typeId}
    </select>
</mapper>